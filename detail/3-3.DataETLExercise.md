# Lab3-3: Data ETL Exercise

## PART A: Data Validation and ETL - Data ETL Exercise<br>
사전 조건: 처리된 데이터를 **parquet format**으로 저장하려면 각 테이블에 대한 새 폴더 위치가 필요합니다.\
예를들어 **sport_team** 테이블의 전체 경로는 다음과 같습니다.\
*`s3://<s3_bucket_name>/tickets/dms_parquet/sport_team`*

Glue는 위의 예와 같이 전체 파일 경로의 입력을 기반으로 새 폴더를 자동으로 생성합니다.\
S3 버킷에 수동으로 폴더를 생성하는 방법은 [사용 설명서](https://docs.aws.amazon.com/AmazonS3/latest/user-guide/create-folder.html)를 참조해보세요.

#### 1.왼쪽 탐색 창의 *ETL 메뉴* 에서 *AWS Glue Studio*를 클릭합니다.
![3-3-1](../images/glue/dee-1.png)

#### 2. *View jobs* 을 선택해주세요.
![3-3-2](../images/glue/dee-2.png)

#### 3. *Visual with a source and target* 옵션을 선택하고 *Create* 를 클릭합니다.
![3-3-3](../images/glue/dee-3.png)

#### 4. 좌측 표출되는 그래프 상단에서 *Data source - S3 bucket*을 선택합니다.

#### 5. 그리고 우측 *Data source properties - S3* 패널의 Database 선택메뉴를 드롭다운하여 *`ticketdata`* 선택합니다.

#### 6. 그리고 *`sport_team`* 테이블을 선택합니다.
![3-3-4](../images/glue/dee-4.png)

#### 7. 이번엔 좌측 그래프 중앙에 있는 *ApplyMapping* 노드를 선택합니다. 그리고 우측 *Transform* 패널에서 Source Key의 *id* 열의 *`Data type`*을 double로 변경합니다.
![3-3-5](../images/glue/dee-5.png)

#### 8. 그래프 하단에 있는 *Data target - S3 bucket* 노드를 선택합니다.<br>그리고 우측 *Data target properites - S3* 패널에서 Format을 드롭다운하여 type을 Parquet으로 변경합니다.<br>이어서 아래의 *Compression Type*을 드롭다운 하여 Uncompressed 를 선택합니다.
#### 9. *Visual with a source and target* 옵션을 선택하고 *Create* 를 클릭합니다.
![3-3-3](../images/glue/dee-3.png)


#### 3. *Visual with a source and target* 옵션을 선택하고 *Create* 를 클릭합니다.
![3-3-3](../images/glue/dee-3.png)


#### 3. *Visual with a source and target* 옵션을 선택하고 *Create* 를 클릭합니다.
![3-3-3](../images/glue/dee-3.png)


#### 3. *Visual with a source and target* 옵션을 선택하고 *Create* 를 클릭합니다.
![3-3-3](../images/glue/dee-3.png)



이렇게 해서 간단히 *Data Validation Exercise* 하는 법을 수행해 봤습니다.<br>
이제 아래를 클릭하시어, Glue의 주요 기능인 ETL Job을 생성해 보기 위한 Lab으로 이동합니다.<br><br>
[3-3.Data Validation and ETL - Data ETL Exercise](../detail/3-3.DataETLExercise.md)
